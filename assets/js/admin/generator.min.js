jQuery(document).ready((function(e){function t(t){var r=t.find('select[name="taxonomy"]'),a=t.find(".mtphr-shortcode-gen-taxonomy-fields").hide(),n=t.find(".mtphr-shortcode-gen-terms");r.live("change",(function(){if(""===e(this).val())a.hide();else{var t={action:"mtphr_shortcode_gen_tax_change",taxonomy:e(this).val(),security:mtphr_shortcodes_generator_vars.security};jQuery.post(ajaxurl,t,(function(e){n.html(e)})),a.show()}})),e(".mtphr-shortcode-gen-rearranger").sortable({items:".mtphr-ui-multi-check"}),i.removeAttr("disabled")}function r(t){var r=t.children("input.shortcode-insert"),a=t.find('input[name="posts_per_page"]').val(),n=t.find('select[name="columns"]').val(),i=t.find('select[name="orderby"]').val(),s=t.find('select[name="order"]').val(),o=t.find('input[name="excerpt_length"]').val(),l=t.find('input[name="excerpt_more"]').val(),c=t.find('input[name="more_link"]').is(":checked"),h=t.find('select[name="taxonomy"]').val(),d=t.find(".mtphr-shortcode-gen-terms"),m=t.find('select[name="operator"]').val(),p=t.find(".mtphr-shortcode-gen-assets"),g="[mtphr_gallery_archive";if(c&&""!==l&&(l="{"+l+"}"),""!==a&&6!==a&&(g+=' posts_per_page="'+parseInt(a)+'"'),""!==n&&3!==n&&(g+=' columns="'+parseInt(n)+'"'),"menu_order"!==i&&(g+=' orderby="'+i+'"'),"DESC"!==s&&(g+=' order="'+s+'"'),""!==o&&(g+=' excerpt_length="'+o+'"'),""!==l&&(g+=' excerpt_more="'+l+'"'),"mtphr_gallery_category"===h||"mtphr_gallery_tag"===h){var u="";d.each((function(){e(this).is(":checked")&&(u+=e(this).val()+",")})),u=u.substr(0,u.length-1),"mtphr_gallery_category"===h&&(g+=' categories="'+u+'"'),"mtphr_gallery_tag"===h&&(g+=' tags="'+u+'"'),"IN"!==m&&(g+=' operator="'+m+'"')}if(p.length>0){var v="";p.each((function(){e(this).is(":checked")&&(v+=e(this).val()+",")})),""!==(v=v.substr(0,v.length-1))&&"thumbnail,like,title,excerpt"!==v&&(g+=' assets="'+v+'"')}g+="]",r.val(g)}function a(t){var r=t.find('select[name="id"]');t.on("change",'select[name="id"]',(function(){""===e(this).val()?i.attr("disabled","disabled"):i.removeAttr("disabled")})),e(".mtphr-shortcode-gen-rearranger").sortable({items:".mtphr-ui-multi-check"}),""!==r.val()?i.removeAttr("disabled"):i.attr("disabled","disabled")}function n(t){var r=t.children("input.shortcode-insert"),a=t.find('select[name="id"]').val(),n=t.find('input[name="class"]').val(),i=t.find(".mtphr-shortcode-gen-assets"),s="[mtphr_gallery";if(""!==a&&(s+=' id="'+parseInt(a)+'"'),""!==n&&(s+=' class="'+n+'"'),i.length>0){var o="";i.each((function(){e(this).is(":checked")&&(o+=e(this).val()+",")})),""!==(o=o.substr(0,o.length-1))&&"gallery,navigation"!==o&&(s+=' slider_layout="'+o+'"')}s+="]",r.val(s)}var i=e(".mtphr-shortcodes-modal-submit");e("body").on("mtphr_shortcode_generator_init",(function(){var e=jQuery(".mtphr-shortcode-gen"),r;switch(e.children("input.shortcode").val()){case"mtphr_gallery_archive":t(e);break;case"mtphr_gallery":a(e);break}})),e("body").on("mtphr_shortcode_generator_value",(function(){var e=jQuery(".mtphr-shortcode-gen"),t;switch(e.children("input.shortcode").val()){case"mtphr_gallery_archive":r(e);break;case"mtphr_gallery":n(e);break}}))}));